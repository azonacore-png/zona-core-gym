(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{2811:function(e,r,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/usuarios",function(){return l(8657)}])},4820:function(e,r,l){"use strict";l.d(r,{Z:function(){return c}});var n=l(5893),s=l(1664),a=l.n(s),i=l(5069),t=l(6884),o=l(1163);function c(e){let{children:r}=e,l=(0,i.a)(),s=(0,i.q)(null==l?void 0:l.email),c=(0,o.useRouter)();if(!l||"loading"===s)return(0,n.jsx)("div",{className:"p-4 text-center",children:"Cargando..."});let d={admin:[{label:"Dashboard",href:"/admin/"},{label:"Clientes",href:"/admin/clientes/"},{label:"Instructores",href:"/admin/instructores/"},{label:"Finanzas",href:"/admin/finanzas/"},{label:"Clases",href:"/admin/clases/"},{label:"Ejercicios",href:"/admin/ejercicios/"},{label:"Progresos",href:"/admin/progresos/"},{label:"Reportes",href:"/admin/reportes/"},{label:"Configuraci\xf3n",href:"/admin/configuracion/"},{label:"Crear Usuarios",href:"/admin/usuarios/"},{label:"Mi Perfil",href:"/admin/perfil/"}],instructor:[{label:"Mis Clases",href:"/instructor/"},{label:"Mi Perfil",href:"/instructor/perfil/"}],client:[{label:"Mi Progreso",href:"/user/"},{label:"Reservar Clase",href:"/user/reservar/"},{label:"Mi Perfil",href:"/user/perfil/"}]},u=d[s]||d.client,m=async()=>{await t.O.auth.signOut(),window.location.href="/zona-core-gym/login/"};return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,n.jsxs)("aside",{className:"w-64 bg-[#2A5B8A] text-white p-4 flex flex-col",children:[(0,n.jsx)("h1",{className:"text-xl font-bold mb-8",children:"ZONA CORE"}),(0,n.jsx)("nav",{className:"space-y-2 flex-1",children:u.map(e=>(0,n.jsx)(a(),{href:e.href,className:"block px-3 py-2 rounded-lg hover:bg-[#1E4A6E] transition-colors ".concat(c.pathname===e.href?"bg-[#1E4A6E]":""),children:e.label},e.href))}),(0,n.jsx)("button",{onClick:m,className:"mt-4 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors w-full",children:"Cerrar sesi\xf3n"})]}),(0,n.jsx)("main",{className:"flex-1 p-6",children:r})]})}},5069:function(e,r,l){"use strict";l.d(r,{a:function(){return a},q:function(){return i}});var n=l(7294),s=l(6884);function a(){let[e,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{s.O.auth.getUser().then(e=>{let{data:l}=e;return r(l.user)});let{data:e}=s.O.auth.onAuthStateChange((e,l)=>{var n;return r(null!==(n=null==l?void 0:l.user)&&void 0!==n?n:null)});return()=>e.subscription.unsubscribe()},[]),e}function i(e){let[r,l]=(0,n.useState)("loading");return(0,n.useEffect)(()=>{e&&s.O.from("users").select("role").eq("email",e).single().then(e=>{let{data:r}=e;l((null==r?void 0:r.role)||"client")})},[e]),r}},8657:function(e,r,l){"use strict";l.r(r),l.d(r,{default:function(){return t}});var n=l(5893),s=l(4820),a=l(7294),i=l(6884);function t(){let[e,r]=(0,a.useState)(!1),[l,t]=(0,a.useState)({email:"",full_name:"",phone:"",birth_date:"",sex:"F",role:"client",membership_type:"monthly",status:"active",id_number:"",emergency_name:"",emergency_phone:"",allergies:"",medical_conditions:"",has_experience:!1}),c=async e=>{if(e.preventDefault(),!l.email.includes("@"))return alert("Escribe un email con @");let{data:n,error:s}=await i.O.auth.signUp({email:l.email,password:Math.random().toString(36),options:{data:{full_name:l.full_name,phone:l.phone,birth_date:l.birth_date,sex:l.sex,role:l.role,membership_type:l.membership_type,status:l.status,id_number:l.id_number,emergency_name:l.emergency_name,emergency_phone:l.emergency_phone,allergies:l.allergies,medical_conditions:l.medical_conditions,has_experience:l.has_experience},emailRedirectTo:"".concat(window.location.origin).concat(window.location.pathname)}});s?alert("Error al crear usuario: "+s.message):(alert("Usuario creado. Se le envi\xf3 un email m\xe1gico."),r(!0),t({email:"",full_name:"",phone:"",birth_date:"",sex:"F",role:"client",membership_type:"monthly",status:"active",id_number:"",emergency_name:"",emergency_phone:"",allergies:"",medical_conditions:"",has_experience:!1}))};return e?(0,n.jsx)(o,{}):(0,n.jsx)(s.Z,{children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-[#2A5B8A] mb-6",children:"Crear Usuario"}),(0,n.jsxs)("form",{onSubmit:c,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Informaci\xf3n personal"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre completo *"}),(0,n.jsx)("input",{type:"text",value:l.full_name,onChange:e=>t({...l,full_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,n.jsx)("input",{type:"email",value:l.email,onChange:e=>t({...l,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel\xe9fono"}),(0,n.jsx)("input",{type:"tel",value:l.phone,onChange:e=>t({...l,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de nacimiento"}),(0,n.jsx)("input",{type:"date",value:l.birth_date,onChange:e=>t({...l,birth_date:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sexo"}),(0,n.jsxs)("select",{value:l.sex,onChange:e=>t({...l,sex:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",children:[(0,n.jsx)("option",{value:"F",children:"Femenino"}),(0,n.jsx)("option",{value:"M",children:"Masculino"}),(0,n.jsx)("option",{value:"Otro",children:"Otro"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C\xe9dula / Pasaporte"}),(0,n.jsx)("input",{type:"text",value:l.id_number,onChange:e=>t({...l,id_number:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Membres\xeda"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),(0,n.jsxs)("select",{value:l.membership_type,onChange:e=>t({...l,membership_type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",children:[(0,n.jsx)("option",{value:"monthly",children:"Mensual"}),(0,n.jsx)("option",{value:"quarterly",children:"Trimestral"}),(0,n.jsx)("option",{value:"semester",children:"Semestral"}),(0,n.jsx)("option",{value:"annual",children:"Anual"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),(0,n.jsxs)("select",{value:l.status,onChange:e=>t({...l,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",children:[(0,n.jsx)("option",{value:"active",children:"Activo"}),(0,n.jsx)("option",{value:"inactive",children:"Inactivo"}),(0,n.jsx)("option",{value:"suspended",children:"Suspendido"})]})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Contacto de emergencia"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),(0,n.jsx)("input",{type:"text",value:l.emergency_name,onChange:e=>t({...l,emergency_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel\xe9fono"}),(0,n.jsx)("input",{type:"tel",value:l.emergency_phone,onChange:e=>t({...l,emergency_phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Salud"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alergias"}),(0,n.jsx)("textarea",{value:l.allergies,onChange:e=>t({...l,allergies:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",rows:3,placeholder:"Listar alergias conocidas..."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condiciones m\xe9dicas"}),(0,n.jsx)("textarea",{value:l.medical_conditions,onChange:e=>t({...l,medical_conditions:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",rows:3,placeholder:"Describir condiciones m\xe9dicas relevantes..."})]}),(0,n.jsx)("div",{className:"md:col-span-2",children:(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:l.has_experience,onChange:e=>t({...l,has_experience:e.target.checked}),className:"w-4 h-4 text-[#FF7A3C] border-gray-300 rounded focus:ring-[#FF7A3C]"}),(0,n.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xbfHa hecho ejercicio antes?"})]})})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,n.jsx)("button",{type:"button",onClick:()=>window.location.href="/zona-core-gym/admin/clientes/",className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,n.jsx)("button",{type:"submit",className:"bg-[#FF7A3C] hover:bg-[#e66a2b] text-white px-6 py-2 rounded-lg font-medium",children:"Crear Usuario"})]})]})]})})})}function o(){return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#2A5B8A] to-[#FF7A3C] flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white/90 backdrop-blur rounded-2xl shadow-xl p-8 w-full max-w-md text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"✉️"}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-[#2A5B8A] mb-2",children:"Revisa tu correo"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Hemos enviado un enlace m\xe1gico a tu bandeja."}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Incluye spam y vuelve a esta pesta\xf1a."})]})})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=2811)}),_N_E=e.O()}]);