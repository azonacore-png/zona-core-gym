(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{4091:function(e,r,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instructor/perfil",function(){return l(6314)}])},4820:function(e,r,l){"use strict";l.d(r,{Z:function(){return u}});var a=l(5893),t=l(1664),s=l.n(t),n=l(5069),i=l(6884),o=l(1163);function u(e){let{children:r}=e,l=(0,n.a)(),t=(0,n.q)(null==l?void 0:l.email),u=(0,o.useRouter)();if(!l||"loading"===t)return(0,a.jsx)("div",{className:"p-4 text-center",children:"Cargando..."});let c={admin:[{label:"Dashboard",href:"/admin/"},{label:"Clientes",href:"/admin/clientes/"},{label:"Instructores",href:"/admin/instructores/"},{label:"Finanzas",href:"/admin/finanzas/"},{label:"Clases",href:"/admin/clases/"},{label:"Ejercicios",href:"/admin/ejercicios/"},{label:"Progresos",href:"/admin/progresos/"},{label:"Reportes",href:"/admin/reportes/"},{label:"Configuraci\xf3n",href:"/admin/configuracion/"},{label:"Crear Usuarios",href:"/admin/usuarios/"},{label:"Mi Perfil",href:"/admin/perfil/"}],instructor:[{label:"Mis Clases",href:"/instructor/"},{label:"Mi Perfil",href:"/instructor/perfil/"}],client:[{label:"Mi Progreso",href:"/user/"},{label:"Reservar Clase",href:"/user/reservar/"},{label:"Mi Perfil",href:"/user/perfil/"}]},d=c[t]||c.client,f=async()=>{await i.O.auth.signOut(),window.location.href="/zona-core-gym/login/"};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("aside",{className:"w-64 bg-[#2A5B8A] text-white p-4 flex flex-col",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-8",children:"ZONA CORE"}),(0,a.jsx)("nav",{className:"space-y-2 flex-1",children:d.map(e=>(0,a.jsx)(s(),{href:e.href,className:"block px-3 py-2 rounded-lg hover:bg-[#1E4A6E] transition-colors ".concat(u.pathname===e.href?"bg-[#1E4A6E]":""),children:e.label},e.href))}),(0,a.jsx)("button",{onClick:f,className:"mt-4 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors w-full",children:"Cerrar sesi\xf3n"})]}),(0,a.jsx)("main",{className:"flex-1 p-6",children:r})]})}},6293:function(e,r,l){"use strict";l.d(r,{Z:function(){return n}});var a=l(5893),t=l(7294),s=l(6884);function n(e){let{url:r,size:l,onUpload:n}=e,[i,o]=(0,t.useState)(!1),u=async e=>{try{if(o(!0),!e.target.files||0===e.target.files.length)throw Error("Selecciona una imagen");let r=e.target.files[0],l=r.name.split(".").pop(),a="".concat(Math.random(),".").concat(l),t="avatars/".concat(a),{error:i}=await s.O.storage.from("avatars").upload(t,r);if(i)throw i;let{data:u}=s.O.storage.from("avatars").getPublicUrl(t),c=u.publicUrl;n(c)}catch(e){alert(e.message)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"text-center",children:[r?(0,a.jsx)("img",{src:r,alt:"Avatar",className:"rounded-full border-4 border-white shadow-lg object-cover mx-auto",style:{width:l,height:l}}):(0,a.jsx)("div",{className:"rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold shadow-lg mx-auto",style:{width:l,height:l},children:i?"...":"\uD83D\uDC64"}),(0,a.jsxs)("label",{className:"cursor-pointer mt-4 inline-block",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:u,disabled:i,className:"hidden"}),(0,a.jsx)("span",{className:"bg-[#FF7A3C] hover:bg-[#e66a2b] text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:i?"Subiendo...":"Cambiar foto"})]})]})}},5069:function(e,r,l){"use strict";l.d(r,{a:function(){return s},q:function(){return n}});var a=l(7294),t=l(6884);function s(){let[e,r]=(0,a.useState)(null);return(0,a.useEffect)(()=>{t.O.auth.getUser().then(e=>{let{data:l}=e;return r(l.user)});let{data:e}=t.O.auth.onAuthStateChange((e,l)=>{var a;return r(null!==(a=null==l?void 0:l.user)&&void 0!==a?a:null)});return()=>e.subscription.unsubscribe()},[]),e}function n(e){let[r,l]=(0,a.useState)("loading");return(0,a.useEffect)(()=>{e&&t.O.from("users").select("role").eq("email",e).single().then(e=>{let{data:r}=e;l((null==r?void 0:r.role)||"client")})},[e]),r}},6314:function(e,r,l){"use strict";l.r(r),l.d(r,{default:function(){return u}});var a=l(5893),t=l(4820),s=l(5069),n=l(6884),i=l(7294),o=l(6293);function u(){let e=(0,s.a)(),r=(0,s.q)(null==e?void 0:e.email),[l,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{e&&n.O.from("users").select("*").eq("id",e.id).single().then(e=>{let{data:r}=e;return u(r)})},[e]);let c=async r=>{await n.O.from("users").update({avatar_url:r}).eq("id",e.id),u({...l,avatar_url:r})};return"instructor"!==r?(0,a.jsx)("div",{className:"p-6",children:"No autorizado"}):l?(0,a.jsx)(t.Z,{children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#2A5B8A] mb-6",children:"Mi Perfil"}),(0,a.jsx)("div",{className:"flex flex-col items-center mb-6",children:(0,a.jsx)(o.Z,{url:l.avatar_url,size:128,onUpload:c})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre completo"}),(0,a.jsx)("input",{className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",defaultValue:l.full_name,onBlur:r=>n.O.from("users").update({full_name:r.target.value}).eq("id",e.id)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{className:"mt-1 w-full px-3 py-2 border rounded-lg bg-gray-100",value:l.email,disabled:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tel\xe9fono"}),(0,a.jsx)("input",{className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF7A3C]",defaultValue:l.phone,onBlur:r=>n.O.from("users").update({phone:r.target.value}).eq("id",e.id)})]})]})]})}):(0,a.jsx)("p",{className:"p-6",children:"Cargando..."})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=4091)}),_N_E=e.O()}]);