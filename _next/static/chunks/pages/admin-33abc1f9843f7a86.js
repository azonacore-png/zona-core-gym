(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(8325)}])},9830:function(e,s,r){"use strict";r.d(s,{Z:function(){return n}});var a=r(5893),t=r(6884),l=r(7294);function n(){let[e,s]=(0,l.useState)([]),[r,n]=(0,l.useState)({type:"Ingreso",category:"",amount:0,description:""}),i=()=>t.O.from("financial_transactions").select("*").order("created_at",{ascending:!1}).then(e=>s(e.data||[]));(0,l.useEffect)(()=>{i()},[]);let o=async()=>{if(!r.category||r.amount<=0){alert("Por favor, completa los campos obligatorios.");return}await t.O.from("financial_transactions").insert([r]),n({type:"Ingreso",category:"",amount:0,description:""}),i()};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"Gesti\xf3n Financiera"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 space-y-3",children:[(0,a.jsxs)("select",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#FF7A3C] focus:border-transparent",value:r.type,onChange:e=>n({...r,type:e.target.value}),children:[(0,a.jsx)("option",{value:"Ingreso",children:"Ingreso"}),(0,a.jsx)("option",{value:"Egreso",children:"Egreso"})]}),(0,a.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#FF7A3C] focus:border-transparent",placeholder:"Categor\xeda",value:r.category,onChange:e=>n({...r,category:e.target.value})}),(0,a.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#FF7A3C] focus:border-transparent",type:"number",placeholder:"Monto",value:r.amount,onChange:e=>n({...r,amount:Number(e.target.value)})}),(0,a.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#FF7A3C] focus:border-transparent",placeholder:"Descripci\xf3n",value:r.description,onChange:e=>n({...r,description:e.target.value})}),(0,a.jsx)("button",{onClick:o,className:"w-full bg-[#FF7A3C] text-white p-2 rounded-lg hover:bg-[#e66a2b] transition-colors",children:"Guardar"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Transacciones recientes"}),(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("li",{className:"py-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.category}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,a.jsxs)("span",{className:"font-medium ".concat("Ingreso"===e.type?"text-green-600":"text-red-600"),children:["Ingreso"===e.type?"+":"-","$",e.amount]})]},e.id))})]})]})}},4820:function(e,s,r){"use strict";r.d(s,{Z:function(){return c}});var a=r(5893),t=r(1664),l=r.n(t),n=r(5069),i=r(6884),o=r(1163);function c(e){let{children:s}=e,r=(0,n.a)(),t=(0,n.q)(null==r?void 0:r.email),c=(0,o.useRouter)();if(!r||"loading"===t)return(0,a.jsx)("div",{className:"p-4 text-center",children:"Cargando..."});let d={admin:[{label:"Dashboard",href:"/admin/"},{label:"Clientes",href:"/admin/clientes/"},{label:"Instructores",href:"/admin/instructores/"},{label:"Finanzas",href:"/admin/finanzas/"},{label:"Clases",href:"/admin/clases/"},{label:"Ejercicios",href:"/admin/ejercicios/"},{label:"Progresos",href:"/admin/progresos/"},{label:"Reportes",href:"/admin/reportes/"},{label:"Configuraci\xf3n",href:"/admin/configuracion/"},{label:"Crear Usuarios",href:"/admin/usuarios/"},{label:"Mi Perfil",href:"/admin/perfil/"}],instructor:[{label:"Mis Clases",href:"/instructor/"},{label:"Mi Perfil",href:"/instructor/perfil/"}],client:[{label:"Mi Progreso",href:"/user/"},{label:"Reservar Clase",href:"/user/reservar/"},{label:"Mi Perfil",href:"/user/perfil/"}]},u=d[t]||d.client,m=async()=>{await i.O.auth.signOut(),window.location.href="/zona-core-gym/login/"};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("aside",{className:"w-64 bg-[#2A5B8A] text-white p-4 flex flex-col",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-8",children:"ZONA CORE"}),(0,a.jsx)("nav",{className:"space-y-2 flex-1",children:u.map(e=>(0,a.jsx)(l(),{href:e.href,className:"block px-3 py-2 rounded-lg hover:bg-[#1E4A6E] transition-colors ".concat(c.pathname===e.href?"bg-[#1E4A6E]":""),children:e.label},e.href))}),(0,a.jsx)("button",{onClick:m,className:"mt-4 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors w-full",children:"Cerrar sesi\xf3n"})]}),(0,a.jsx)("main",{className:"flex-1 p-6",children:s})]})}},5069:function(e,s,r){"use strict";r.d(s,{a:function(){return l},q:function(){return n}});var a=r(7294),t=r(6884);function l(){let[e,s]=(0,a.useState)(null);return(0,a.useEffect)(()=>{t.O.auth.getUser().then(e=>{let{data:r}=e;return s(r.user)});let{data:e}=t.O.auth.onAuthStateChange((e,r)=>{var a;return s(null!==(a=null==r?void 0:r.user)&&void 0!==a?a:null)});return()=>e.subscription.unsubscribe()},[]),e}function n(e){let[s,r]=(0,a.useState)("loading");return(0,a.useEffect)(()=>{e&&t.O.from("users").select("role").eq("email",e).single().then(e=>{let{data:s}=e;r((null==s?void 0:s.role)||"client")})},[e]),s}},8325:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var a=r(5893),t=r(4820),l=r(6884),n=r(7294);function i(){let[e,s]=(0,n.useState)({});return(0,n.useEffect)(()=>{Promise.all([l.O.from("users").select("*",{count:"exact",head:!0}),l.O.from("payments").select("amount").eq("is_paid",!0),l.O.from("vw_monthly_income").select("*").order("month",{ascending:!1}).limit(1).single()]).then(e=>{var r,a;let[t,l,n]=e;s({totalClients:t.count,totalIncome:(null===(r=l.data)||void 0===r?void 0:r.reduce((e,s)=>e+s.amount,0))||0,lastMonthIncome:(null===(a=n.data)||void 0===a?void 0:a.total)||0})})},[]),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#2A5B8A] mb-6",children:"Dashboard Admin"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Clientes registrados"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:e.totalClients||0})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Ingresos totales"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:["$",e.totalIncome||0]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Ingreso mes pasado"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:["$",e.lastMonthIncome||0]})]})]})]})}function o(){let[e,s]=(0,n.useState)([]),[r,t]=(0,n.useState)({full_name:"",email:"",specialty:""}),i=()=>l.O.from("instructors").select("*").then(e=>s(e.data||[]));(0,n.useEffect)(()=>{i()},[]);let o=async()=>{if(!r.full_name||!r.email||!r.specialty){alert("Por favor, completa todos los campos.");return}await l.O.from("instructors").insert([r]),t({full_name:"",email:"",specialty:""}),i()};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"Instructores"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 space-y-3",children:[(0,a.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#FF7A3C] focus:border-transparent",placeholder:"Nombre completo",value:r.full_name,onChange:e=>t({...r,full_name:e.target.value})}),(0,a.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#FF7A3C] focus:border-transparent",placeholder:"Email",value:r.email,onChange:e=>t({...r,email:e.target.value})}),(0,a.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#FF7A3C] focus:border-transparent",placeholder:"Especialidad",value:r.specialty,onChange:e=>t({...r,specialty:e.target.value})}),(0,a.jsx)("button",{onClick:o,className:"w-full bg-[#FF7A3C] text-white p-2 rounded-lg hover:bg-[#e66a2b] transition-colors",children:"Guardar"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Lista de instructores"}),(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("li",{className:"py-3",children:[(0,a.jsx)("p",{className:"font-medium",children:e.full_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.specialty})]},e.id))})]})]})}var c=r(9830);function d(){return(0,a.jsx)(t.Z,{children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(i,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,a.jsx)(o,{}),(0,a.jsx)(c.Z,{})]})]})})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);